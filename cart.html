<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Your Cart â€“ ikman.lk</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles/base.css" />
    <link rel="stylesheet" href="styles/theme.css" />
    <script defer src="scripts/core.js"></script>
    <script defer>
      window.addEventListener('DOMContentLoaded', function(){
        const list = document.getElementById('cart-list');
        const totalEl = document.getElementById('cart-total');
        function fmt(n){ return Number(n).toLocaleString('en-LK',{style:'currency',currency:'LKR'}); }
        function render(){
          const items = AppCore.getCart();
          if(items.length===0){ list.innerHTML = '<p class="muted">Your cart is empty.</p>'; totalEl.textContent = fmt(0); return; }
          list.innerHTML = items.map(i=>`
            <div class="glass" style="display:grid; grid-template-columns:80px 1fr auto; gap:12px; padding:10px; align-items:center">
              <img src="${i.img}" alt="${i.title}" style="width:80px; height:56px; object-fit:cover; border-radius:10px" />
              <div>
                <div><strong>${i.title}</strong></div>
                <div class="muted">${fmt(i.price)}</div>
              </div>
              <div style="display:flex; align-items:center; gap:8px">
                <button class="btn btn-ghost" data-dec="${i.id}">â€“</button>
                <input class="input" data-qty="${i.id}" value="${i.qty}" style="width:60px; text-align:center" />
                <button class="btn btn-ghost" data-inc="${i.id}">+</button>
                <button class="btn btn-ghost" data-remove="${i.id}" title="Remove">âœ•</button>
              </div>
            </div>`).join('');
          const total = items.reduce((s,i)=> s + i.price * i.qty, 0);
          totalEl.textContent = fmt(total);
        }
        render();
        document.getElementById('actions').addEventListener('click', (e)=>{
          if(e.target.matches('[data-clear]')){ AppCore.clearCart(); render(); AppCore.updateCartBadge(); }
        });
        list.addEventListener('click', (e)=>{
          const inc = e.target.getAttribute('data-inc');
          const dec = e.target.getAttribute('data-dec');
          const rem = e.target.getAttribute('data-remove');
          if(inc){ const qty = Number(document.querySelector(`[data-qty="${inc}"]`).value)||1; AppCore.updateQty(inc, qty+1); render(); AppCore.updateCartBadge(); }
          if(dec){ const qty = Number(document.querySelector(`[data-qty="${dec}"]`).value)||1; AppCore.updateQty(dec, Math.max(1, qty-1)); render(); AppCore.updateCartBadge(); }
          if(rem){ AppCore.removeFromCart(rem); render(); AppCore.updateCartBadge(); }
        });
        list.addEventListener('input', (e)=>{
          const id = e.target.getAttribute('data-qty'); if(!id) return; const v = Math.max(1, Number(e.target.value)||1); AppCore.updateQty(id, v); render(); AppCore.updateCartBadge();
        });
      });
    </script>
  </head>
  <body>
    <header class="topbar">
      <div class="container topbar-inner">
        <a href="index.html" class="brand" aria-label="Ikman.lk Home">
          <img src="assets/ikman-logo-mark.svg" alt="ikman" width="36" height="36" style="border-radius:10px" />
          <span>ikman.lk</span>
        </a>
        <div class="searchbar search-wrap" role="search">
          <span aria-hidden="true">ğŸ”</span>
          <input id="global-search" type="text" placeholder="What are you looking for?" aria-label="Search" />
          <button class="btn btn-primary" onclick="location.href='browse.html'">Search</button>
          <div id="search-suggest" class="glass hidden" style="position:absolute; margin-top:52px; width:clamp(280px,60vw,700px); border-radius:14px; overflow:hidden;">
          </div>
        </div>
        <div class="top-actions">
          <button class="icon-btn" data-theme-toggle aria-label="Toggle dark mode" title="Toggle dark mode">ğŸŒ™</button>
          <a class="icon-btn" href="chat.html" title="Messages">ğŸ’¬</a>
          <a class="icon-btn" href="cart.html" title="Cart" style="position:relative">ğŸ›’<span id="cart-count" class="badge" style="position:absolute; top:-8px; right:-8px; font-size:11px; display:none">0</span></a>
          <a class="btn btn-ghost" href="profile.html">Profile</a>
          <a class="btn btn-accent" href="post.html">Post Ad</a>
        </div>
      </div>
    </header>
    <script>
      window.addEventListener('DOMContentLoaded', function() {
        if (window.AppCore && AppCore.initSearch) {
          AppCore.initSearch('#global-search', '#search-suggest');
        }
      });
    </script>
    <main class="container" style="margin-top:20px; display:grid; gap:16px">
      <h2 style="margin:0">Your Cart</h2>
      <div id="cart-list" style="display:grid; gap:10px"></div>
      <div class="glass" style="display:flex; align-items:center; justify-content:space-between; padding:12px" id="actions">
        <div><strong>Total:</strong> <span id="cart-total">LKRÂ 0.00</span></div>
        <div style="display:flex; gap:8px">
          <button class="btn btn-ghost" data-clear>Clear Cart</button>
          <button class="btn btn-primary" onclick="alert('Checkout (mock)')">Checkout</button>
        </div>
      </div>
    </main>
    <footer class="footer">
      <div class="container">
        <div class="grid" style="grid-template-columns: repeat(6, minmax(0,1fr)); gap: 24px; align-items:start">
          <div>
            <h4 style="margin:0 0 10px">More from ikman</h4>
            <nav class="links">
              <a href="sell-fast.html">Sell Fast</a>
              <a href="membership.html">Membership</a>
              <a href="banner-ads.html">Banner Ads</a>
              <a href="boost-ad.html">Boost Ad</a>
            </nav>
          </div>
          <div>
            <h4 style="margin:0 0 10px">Help & Support</h4>
            <nav class="links">
              <a href="faq.html">FAQ</a>
              <a href="stay-safe.html">Stay safe</a>
              <a href="contact.html">Contact Us</a>
            </nav>
          </div>
          <div>
            <h4 style="margin:0 0 10px">About ikman</h4>
            <nav class="links">
              <a href="about.html">About Us</a>
              <a href="careers.html">Careers</a>
              <a href="terms.html">Terms and Conditions</a>
              <a href="privacy.html">Privacy policy</a>
              <a href="sitemap.html">Sitemap</a>
            </nav>
          </div>
          <div>
            <h4 style="margin:0 0 10px">Blog & Guides</h4>
            <nav class="links">
              <a href="motorguide.html">MotorGuide LK</a>
              <a href="propertyguide.html">PropertyGuide LK</a>
              <a href="blog.html">Official Blog</a>
            </nav>
          </div>
          <div>
            <h4 style="margin:0 0 10px">Download our app</h4>
            <div style="display:grid; gap:8px">
              <a href="https://play.google.com" target="_blank" rel="noopener"> <img alt="Get it on Google Play" src="https://developer.android.com/images/brand/en_app_rgb_wo_45.png" width="156" height="46"/> </a>
              <a href="https://www.apple.com/app-store/" target="_blank" rel="noopener"> <img alt="Download on the App Store" src="https://tools.applemediaservices.com/api/badges/download-on-the-app-store/black/en-us?size=140x40" width="156" height="46"/> </a>
            </div>
          </div>
          <div>
            <h4 style="margin:0 0 10px">Other countries</h4>
            <nav class="links">
              <a href="bangladesh.html">ğŸ‡§ğŸ‡© Bangladesh</a>
            </nav>
          </div>
        </div>
        <p class="muted" style="margin-top:16px">Â© <span id="year"></span> ikman.lk â€“ Modern Redesign</p>
      </div>
      <script>document.getElementById('year').textContent = new Date().getFullYear();</script>
    </footer>
    <nav class="mobile-nav">
      <div class="container">
        <div class="mobile-bottom-nav">
          <a href="index.html">ğŸ </a>
          <a href="browse.html">ğŸ”</a>
          <a href="post.html">â•</a>
          <a href="chat.html">ğŸ’¬</a>
          <a href="profile.html">ğŸ‘¤</a>
        </div>
      </div>
    </nav>
    <a class="btn btn-primary floating-post" href="post.html">â• Post Ad</a>
  </body>
  </html>


